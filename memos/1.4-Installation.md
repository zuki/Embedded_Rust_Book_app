# 環境構築

```
$ sw_vers
ProductName:	Mac OS X
ProductVersion:	10.14.6
BuildVersion:	18G6020

$ rustc -V
rustc 1.45.0 (5c1f21c3b 2020-07-13)

# 2.1 QEMUで使用
$ rustup target add thumbv7m-none-eabi
info: downloading component 'rust-std' for 'thumbv7m-none-eabi'
info: installing component 'rust-std' for 'thumbv7m-none-eabi'
info: Defaulting to 500.0 MiB unpack ram

# STM32F4Discoveryで使用
$ rustup target add thumbv7em-none-eabihf
info: component 'rust-std' for target 'thumbv7em-none-eabihf' is up to date

$ cargo install cargo-binutils
    Updating crates.io index
     Ignored package `cargo-binutils v0.3.0` is already installed, use --force to override

$ rustup component add llvm-tools-preview
info: component 'llvm-tools-preview' for target 'x86_64-apple-darwin' is up to date

$ arm-none-eabi-gcc --version
arm-none-eabi-gcc (GNU Arm Embedded Toolchain 9-2020-q2-update) 9.3.1 20200408 (release)

$ openocd --version
Open On-Chip Debugger 0.10.0

$ qemu-system-arm --version
QEMU emulator version 5.0.0
```

## 稼働確認

```
$ openocd -f interface/stlink-v2-1.cfg -f target/stm32f4x.cfg
Open On-Chip Debugger 0.10.0
Licensed under GNU GPL v2
For bug reports, read
	http://openocd.org/doc/doxygen/bugs.html
Info : auto-selecting first available session transport "hla_swd". To override use 'transport select <transport>'.
Info : The selected transport took over low-level target control. The results might differ compared to plain JTAG/SWD
adapter speed: 2000 kHz
adapter_nsrst_delay: 100
none separate
Info : Unable to match requested speed 2000 kHz, using 1800 kHz
Info : Unable to match requested speed 2000 kHz, using 1800 kHz
Info : clock speed 1800 kHz
Info : STLINK v2 JTAG v25 API v2 SWIM v14 VID 0x0483 PID 0x374B
Info : using stlink api v2
Info : Target voltage: 2.884520
Info : stm32f4x.cpu: hardware has 6 breakpoints, 4 watchpoints
```
